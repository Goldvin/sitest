<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Website</title>
    <link rel="icon" id="favicon" type="image/x-icon">
    <style>
        :root {
            --navbar-bg: #3498db;
            --navbar-font: #ffffff;
            --navbar-font-size: 16px;
            --navbar-font-family: 'Arial', sans-serif;

            --footer-bg: #333333;
            --footer-font: #ffffff;
            --footer-font-size: 14px;
            --footer-font-family: 'Verdana', sans-serif;

            --body-bg: #f9f9f9;
            --body-font: #333333;
            --body-font-size: 16px;
            --body-font-family: 'Arial', sans-serif;

            --card-hover-bg: #eaf4fc;
            --card-hover-border: #3498db;

            --title-hover-color: #ff6347;

            --dot-color: #ffffff;
            --dot-active-color: #ff4757;
            --dot-size: 10px;
        }

        body {
            font-family: var(--body-font-family);
            margin: 0;
            padding: 0;
            background-color: var(--body-bg);
            color: var(--body-font);
        }

        /* General Navbar Styling */
nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: var(--navbar-bg, #1f2937);
    color: var(--navbar-font, #ffffff);
    padding: 10px 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
}

/* Logo Section */
nav .logo {
    display: flex;
    align-items: center;
}

nav .logo img {
    height: var(--logo-height, 40px);
    width: auto;
}

/* Navigation Links */
nav .nav-links {
    display: flex;
    align-items: center;
    gap: 20px;
}

nav .nav-links a {
    text-decoration: none;
    color: inherit;
    font-size: var(--navbar-font-size, 16px);
    font-family: var(--navbar-font-family, Arial);
    padding: 5px 10px;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

nav .nav-links a:hover {
    background-color: var(--navbar-hover-bg, #374151);
}

/* Search Bar */
nav .nav-search {
    display: flex;
    align-items: center;
    gap: 10px;
}

nav .nav-search input {
    padding: 8px 12px;
    font-size: var(--search-font-size, 14px);
    border: 1px solid var(--search-border-color, #d1d5db);
    border-radius: 5px;
    outline: none;
    transition: border-color 0.3s ease;
}

nav .nav-search input:focus {
    border-color: var(--search-focus-border, #3b82f6);
}

nav .nav-search button {
    padding: 8px 16px;
    background-color: var(--search-btn-bg, #3b82f6);
    color: var(--search-btn-font, #ffffff);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

nav .nav-search button:hover {
    background-color: var(--search-btn-hover-bg, #2563eb);
}


        .navbar-links {
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .navbar-search {
            margin-top: 10px;
        }
        .header-carousel {
            position: relative;
            width: 100%;
            height: 300px;
            overflow: hidden;
        }
        .header-carousel .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 1s ease-in-out;
            opacity: 0;
        }
        .header-carousel .slide.active {
            opacity: 1;
        }
        .header-carousel .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .carousel-caption {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #fff;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
        }
        .carousel-caption h3 {
            font-size: 24px;
            margin: 0;
        }
        .carousel-caption p {
            font-size: 18px;
            margin: 5px 0 0;
        }

        .carousel-dots {
            display: flex;
            justify-content: center;
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            gap: 10px;
        }
        .carousel-dot {
            width: var(--dot-size);
            height: var(--dot-size);
            background-color: var(--dot-color);
            border-radius: 50%;
            cursor: pointer;
        }
        .carousel-dot.active {
            background-color: var(--dot-active-color);
        }

        .filter-search {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
            justify-content: center;
            align-items: center;
        }
        .filter-search input, .filter-search select {
            padding: 10px;
            font-size: var(--body-font-size);
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
            max-width: 300px;
        }

        .content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .card {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            background-color: var(--card-hover-bg);
            border-color: var(--card-hover-border);
        }
        .card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        .card-body {
            padding: 15px;
        }
        .card-title {
            font-size: 18px;
            margin: 0 0 10px;
        }
        .card-title a {
            color: inherit;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .card-title a:hover {
            color: var(--title-hover-color);
        }
        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }
        .card-tag {
            display: inline-block;
            background-color: #3498db;
            color: #fff;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 4px;
        }
        .card-description {
            font-size: 14px;
            color: #666;
        }

        footer {
        background-color: var(--footer-bg, #1e1e1e);
        color: var(--footer-font, #ffffff);
        padding: 40px 20px;
        font-family: var(--footer-font-family, 'Arial', sans-serif);
    }

    .footer-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        gap: 20px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .footer-section {
        flex: 1;
        min-width: 200px;
    }

    .footer-section h4 {
        font-size: 18px;
        margin-bottom: 10px;
        color: var(--footer-section-title-color, #f1c40f);
    }

    .footer-section p {
        margin: 0 0 10px;
        font-size: var(--footer-font-size, 14px);
    }

    .footer-section ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .footer-section ul li {
        margin: 5px 0;
    }

    .footer-section ul li a {
        color: var(--footer-link-color, #bdc3c7);
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .footer-section ul li a:hover {
        color: var(--footer-link-hover-color, #f1c40f);
    }

    .footer-section a {
        color: var(--footer-link-color, #bdc3c7);
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .footer-section a:hover {
        color: var(--footer-link-hover-color, #f1c40f);
    }

    .footer-bottom {
        text-align: center;
        margin-top: 20px;
        border-top: 1px solid #444;
        padding-top: 10px;
        font-size: var(--footer-bottom-font-size, 12px);
        color: var(--footer-bottom-font-color, #7f8c8d);
    }

        @media (max-width: 768px) {
            .filter-search input, .filter-search select {
                width: calc(100% - 20px);
                max-width: none;
            }
            .footer-container {
                flex-direction: column;
                align-items: center;
            }

            .footer-section {
                text-align: center;
            }

            .footer-bottom {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <nav id="navbar">
        <div class="logo">
            <img src="logo.png" alt="Logo" id="logo-image">
        </div>
        <div class="nav-links" id="nav-links"></div>
        <div class="nav-search">
            <input type="text" id="search-bar" placeholder="Search posts...">
            <button id="search-button">Search</button>
        </div>
    </nav>
    <div class="header-carousel" id="header-carousel"></div>
    <div class="filter-search">
        <input type="text" id="search-input" placeholder="Search by title or tags...">
        <select id="tag-filter">
            <option value="">Filter by tag</option>
        </select>
    </div>
    <div class="content" id="content"></div>
    <footer>
        <div class="footer-container">
            <div class="footer-section" id="footer-address">
                <h4>Alamat</h4>
            </div>
            <div class="footer-section" id="footer-links">
                <h4>Sitelink</h4>
            </div>
            <div class="footer-section" id="footer-contact">
                <h4>Hubungi Kami</h4>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Dynamic Website. Semua Hak Dilindungi.</p>
        </div>
    </footer>

    <script>
        const SHEET_ID = '1G1UjWN_ru3PdQf-qlKuwIT5CCfQSuA6reOzQZdu6FW8';
        const API_KEY = 'AIzaSyAmOoWpQprHyZS97DiIXCdy2LFkAe0POa8';

        const urls = {
            navbar: `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Navbar?key=${API_KEY}`,
            body: `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Body?key=${API_KEY}`,
            header: `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Header?key=${API_KEY}`,
            footer: `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Footer?key=${API_KEY}`,
        };

        const fetchData = async (url) => {
            const response = await fetch(url);
            return response.json();
        };

        const renderNavbar = async () => {
    const data = await fetchData(urls.navbar);
    const navLinks = document.getElementById('nav-links');
    const logoImage = document.getElementById('logo-image');

    const rows = data.values.slice(1); // Skip header row

    // Clear Existing Content
    navLinks.innerHTML = '';

    // Set Logo
    const logoRow = rows.find(row => row[0] === 'Logo');
    if (logoRow) {
        logoImage.src = logoRow[1];
        logoImage.alt = logoRow[2] || 'Logo';
    }

    // Add Navigation Links
    rows.filter(row => row[0] === 'Link').forEach(linkRow => {
        const link = document.createElement('a');
        link.href = linkRow[2];
        link.textContent = linkRow[1];
        link.target = '_blank';
        navLinks.appendChild(link);
    });
};

        const renderCarousel = async () => {
            const data = await fetchData(urls.header);
            const carousel = document.getElementById('header-carousel');
            const dots = document.createElement('div');
            dots.className = 'carousel-dots';

            const slides = data.values.slice(1).map((row, index) => {
                const slide = document.createElement('div');
                slide.className = `slide ${index === 0 ? 'active' : ''}`;
                slide.innerHTML = `
                    <a href="${row[1]}" class="slide-link">
                        <img src="${row[0]}" alt="${row[2]}">
                        <div class="carousel-caption">
                            <h3>${row[2]}</h3>
                            <p>${row[3]}</p>
                        </div>
                    </a>
                `;
                dots.innerHTML += `<div class="carousel-dot ${index === 0 ? 'active' : ''}"></div>`;
                return slide;
            });

            carousel.append(...slides);
            carousel.appendChild(dots);
            setupAutoSlide();
        };

        const renderCards = async () => {
            const data = await fetchData(urls.body);
            const content = document.getElementById('content');
            const searchInput = document.getElementById('search-input');
            const tagFilter = document.getElementById('tag-filter');

            const allTags = [...new Set(data.values.slice(1).map(row => row[2]))];
            tagFilter.innerHTML += allTags.map(tag => `<option value="${tag}">${tag}</option>`).join('');

            const renderFiltered = () => {
                const searchValue = searchInput.value.toLowerCase();
                const filterValue = tagFilter.value;

                const filteredData = data.values.slice(1).filter(row =>
                    (row[1].toLowerCase().includes(searchValue) || row[2].includes(searchValue)) &&
                    (filterValue === '' || row[2] === filterValue)
                );

                content.innerHTML = data.values.slice(1).map(row => {
                const tags = row[2].split(',').map(tag => `<span class="card-tag">${tag.trim()}</span>`).join('');
                return `
                    <div class="card">
                        <img src="${row[0]}" alt="${row[1]}">
                        <div class="card-body">
                            <div class="card-tags">${tags}</div>
                            <h3 class="card-title">
                                <a href="${row[4]}" target="_blank">${row[1]}</a>
                            </h3>
                            <p class="card-description">${row[3]}</p>
                        </div>
                    </div>
                `;
            }).join('');
            };

            searchInput.addEventListener('input', renderFiltered);
            tagFilter.addEventListener('change', renderFiltered);
            renderFiltered();
        };

        const renderFooter = async () => {
        const data = await fetchData(urls.footer);
        const rows = data.values.slice(1); // Skip header row

        const addressSection = document.getElementById('footer-address');
        const sitelinkSection = document.getElementById('footer-links');
        const contactSection = document.getElementById('footer-contact');

        // Clear existing content
        addressSection.innerHTML = '';
        sitelinkSection.innerHTML = '';
        contactSection.innerHTML = '';

        // Populate Address Section
        const addressTitle = rows.find(row => row[0] === 'Address' && row[1] === 'Title')[2];
        const addressContent = rows.find(row => row[0] === 'Address' && row[1] === 'Content')[2];
        addressSection.innerHTML = `
            <h4>${addressTitle}</h4>
            <p>${addressContent}</p>
        `;

        // Populate Sitelink Section
        const sitelinkTitle = rows.find(row => row[0] === 'Sitelink' && row[1] === 'Title')[2];
        const sitelinks = rows.filter(row => row[0] === 'Sitelink' && row[1].includes('Link Text'));
        sitelinkSection.innerHTML = `<h4>${sitelinkTitle}</h4><ul></ul>`;
        const sitelinkList = sitelinkSection.querySelector('ul');
        sitelinks.forEach(linkRow => {
            const text = linkRow[2];
            const urlRow = rows.find(r => r[0] === 'Sitelink' && r[1] === linkRow[1].replace('Text', 'URL'));
            const url = urlRow ? urlRow[2] : '#';
            sitelinkList.innerHTML += `<li><a href="${url}" target="_blank">${text}</a></li>`;
        });

        // Populate Contact Section
        const contactTitle = rows.find(row => row[0] === 'Contact' && row[1] === 'Title')[2];
        const emailLabel = rows.find(row => row[0] === 'Contact' && row[1] === 'Email Label')[2];
        const emailAddress = rows.find(row => row[0] === 'Contact' && row[1] === 'Email Address')[2];
        const phoneLabel = rows.find(row => row[0] === 'Contact' && row[1] === 'Phone Label')[2];
        const phoneNumber = rows.find(row => row[0] === 'Contact' && row[1] === 'Phone Number')[2];
        const socialLabel = rows.find(row => row[0] === 'Contact' && row[1] === 'Social Label')[2];
        const facebookLink = rows.find(row => row[0] === 'Contact' && row[1] === 'Social Facebook')[2];
        const instagramLink = rows.find(row => row[0] === 'Contact' && row[1] === 'Social Instagram')[2];

        contactSection.innerHTML = `
            <h4>${contactTitle}</h4>
            <p>${emailLabel}: <a href="mailto:${emailAddress}">${emailAddress}</a></p>
            <p>${phoneLabel}: <a href="tel:${phoneNumber}">${phoneNumber}</a></p>
            <p>${socialLabel}: 
                <a href="${facebookLink}" target="_blank">Facebook</a> | 
                <a href="${instagramLink}" target="_blank">Instagram</a>
            </p>
        `;
    };

        const setupAutoSlide = () => {
            const slides = document.querySelectorAll('.header-carousel .slide');
            const dots = document.querySelectorAll('.carousel-dot');
            let currentIndex = 0;

            setInterval(() => {
                slides[currentIndex].classList.remove('active');
                dots[currentIndex].classList.remove('active');

                currentIndex = (currentIndex + 1) % slides.length;

                slides[currentIndex].classList.add('active');
                dots[currentIndex].classList.add('active');
            }, 5000);
        };

        const init = async () => {
            await renderNavbar();
            await renderCarousel();
            await renderCards();
            await renderFooter();
        };

        init();
    </script>
</body>
</html>
